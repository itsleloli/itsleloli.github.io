<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leandro Bonora - Chef Line's Journey</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Prism.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism.min.css">
    <!-- Favicon link -->
    <link rel="icon" type="image/png" href="images/pochita.png">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Custom CSS to ensure the navbar doesn't move when a scrollbar is added */
        body {
            padding-top: 50px; /* Add padding to the top of the body to account for the fixed navbar */
        }

        /* Custom CSS for code snippets background color */
        .snippet {
            background-color: #cbcbcb87; /* You can adjust this color as needed */
            padding: 10px;
            border-radius: 5px;
            border-width: 5px;
            margin-bottom: 5px;
        }

        /* Center-align the video within the section */
        #video {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        /* Adjust video width */
        #gameTrailer {
            width: 70%; /* Adjust this value as needed */
            height: auto;
        }
    </style>
</head>
<body>

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: #433b39 ; padding-top: 10px; padding-bottom: 20px; height: 70px;">
    <a class="navbar-brand" href="index.html" style="font-size: 32px; padding-top: -1;">Leandro Bonora</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="index.html" style="font-size: 20px; padding: 10px 20px;">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="about.html" style="font-size: 20px; padding: 10px 20px;">About Me</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="pdf/CV Leandro Bonora 2023 English.pdf" target="_blank" style="font-size: 20px; padding: 10px 20px;">Resume</a>
            </li>
        </ul>
    </div>
</nav>

<section id="portfolio" class="py-5" style="background: linear-gradient(to bottom, #e4b074, #f0efeb, #fdfdfd, #f0efeb, #3f7347);">
    <div class="container">
        <h1 class="text-center h1" style="font-size: 60px;">Chef Line's Journey</h1> 
        <h1 class="text-center h1" style="font-size: 45px;">Work In Progress</h1> 
        <p class="text-center">Food Themed Action Adventure Game</p> 
        <hr class="my-4" style="border-width: 2px;">
        <div class="row">
            <!-- Your content here -->
        </div>

        
        <!-- Description Section -->
        <div class="container py-2 text-left">
            <h2>Description</h2>
            <p style="font-size: 21px; font-weight: normal;">
                This project originated from my first internship at a company called EmberGlitch. I had the unique opportunity to lead my own project with a dedicated team of six members. Throughout this experience, we received valuable guidance and support from the professionals at EmberGlitch.
            </p>
            <p style="font-size: 21px; font-weight: normal;">
                The premise of the game is that you play as a chef who has been transported to a food-themed world. In this world, you must fight or cook your way through various challenges to uncover the mysteries of this strange place and understand why you were brought here.
            </p>
            <div id="video" class="container py-5 text-center">
                <h2 style="padding-top: 20px;">Chef Line's Journey Playthrough Teaser</h2>
                <!-- First Video -->
                <video id="gameTrailer-chefline" controls style="width: 100%; max-width: 1200px; height: auto;">
                    <source src="videos/ChefLine's-Journey-Gameplay.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <br>
            </div>
            
            
</div>

<style>
    .btn-custom-color {
        background-color: #74b5e4;
    }

    .btn-custom-text-size {
        font-size: 22px; /* Adjust the font size as needed */
    }
</style>


<!-- Team Section -->
<div class="container py-2 text-left">
    <h2>Team</h2>
    <p style="font-size: 21px; font-weight: normal;">
        This team consisted of nearly the same members as in my previous project, Starline. Consequently, teamwork was quite seamless, and I encountered absolutely no difficulties working with these fantastic individuals.
    </p>
    
    <p style="font-size: 20px; font-weight: normal;">
        <strong>Team Members: 6</strong>
        <ul class="text-muted lead" style="font-size: 20px; font-weight: normal;">
            <strong>Developers</strong>
            <li>Leandro Bonora (Programming)</li>
            <li>Milan Driece (Programming)</li>
            <br>
            <strong>Artists</strong>
            <li>Aiden Glen (2D & 3D)</li>
            <li>Anna Heijblom (3D, Animator)</li>
            <li>Jordy Gouw (3D Prop Artist)</li>
            <li>Jae Gerritsen (3D, VFX)</li>
        </ul>
        <br>
    </p>
</div>


<div class="container">
    <h2 class="text-left h1">Work Process</h2>
    <p class="text-left text-muted lead">
        Since this project was quite different from the usual, it was particularly interesting for me. I decided to take on the role of Scrum Master once again, actively working to improve my team leadership skills alongside my mentors at EmberGlitch. We placed a strong emphasis on learning from professionals, which resulted in thorough documentation, planning, and discussions within the team before diving into development.
    </p>

    <p class="text-left text-muted lead">
        I worked on various aspects of the project, including enemy design and behavior, as well as several smaller features. I handled most of the UI-related tasks and implemented interactive elements, health systems, and more.
    </p>
    <br> 
    <p class="text-left text-muted lead">
        I also contributed significantly to the extensive Game Design Document 30+ Pages we created before commencing development. Feel free to check it out!
    </p>
    <div class="container py-3 text-center">
        <a href="pdf/Chef Lines Journey GDD.pdf" target="_blank" class="btn btn-custom-color btn-custom-text-size" style="width: 320px; height: 60px; line-height: 40px; color: rgb(0, 0, 0);" target="_blank">Game Design Document</a>
    </div>
    <hr class="my-4" style="border-width: 2px; width: 450px;"> <!-- Adjust the width as needed -->
    <br>

<div class="text-left h4 text-left">
    <p>Enemy Behavior</p>
</div>
<div class="text-left text-left">
    <p class="text-left text-muted lead">
        For the enemy behavior in our game, I implemented a system based on state machines. 
        This approach allowed me to efficiently manage and control various states such as idle, roaming, chasing, attacking, and fleeing. 
        Each state was designed to handle specific conditions and transitions, 
        ensuring that the enemies behaved dynamically and realistically within the game environment. 
        Taking this approach was a nice challenge because previously, I had implemented almost everything in the same script, 
        Recognizing that my previous approach, which consolidated everything into a single script, was not ideal, I transitioned to state machines. 
        This decision enabled me to modularize and organize enemy behaviors more effectively, making the code more readable and maintainable for my fellow developer. 
        The resulting flexible framework not only enhanced gameplay immersion but also increased amount of effort needed for making new enemies.


    </p>
    <br>
    <p class="text-ce text-muted lead">
        Im really happy with how everything turned out. 
        Switching to state machines made it so much easier for me to add different types of enemies and reuse stuff effectively. 
        It streamlined the whole process and made the enemies more flexible. Now, 
        I can quickly tweak and adjust enemy behaviors without a lot of hassle.
    </p>

    <div class="text-center text-center">
        <br>
        <p class="text-center text-muted lead">Underneath, you can see one of the small critters I made aswell as the StateMachine and State Scripts I made that serve as the base for the critter states</p>
        <div class="image-container" style="display: flex; max-width: 2400px;">
            <div class="gif-container" style="max-width: 60%; margin: 0 auto;">
                <img src="gifs/Potato.gif" alt="GIF Description" style="max-width: 100%; width: 95%;" id="enlargeNewImage">
            </div>
            <div class="gif-container" style="max-width: 60%; margin: 0 auto;">
                <img src="gifs/Onion.gif" alt="GIF Description" style="max-width: 100%; width: 95%;" id="enlargeNewImage">
            </div>
            <br>
            <br>
        </div>
    </div>
        <style>
            .custom-button {
                background-color: rgb(113, 113, 113);
                padding: 15px 30px;
                font-size: 18px;
            }
            pre {
                border: none;
                background-color: #333;
                color: white;
                padding: 10px;
            }
        </style>
    </head>
    <style>
        pre {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <br>
        <div class="row justify-content-center mb-2">
            <!-- Button 1: Show Script 1 -->
            <div class="col-md-3 text-center">
                <button class="btn btn-primary custom-button" data-toggle="collapse" data-target="#snippet1"> StateMachine Script</button>
            </div>
            <!-- Button 2: Show Script 2 -->
            <div class="col-md-3 text-center">
                <button class="btn btn-primary custom-button" data-toggle="collapse" data-target="#snippet2">State Script</button>
            </div>
        </div>
        <!-- Code Snippet 1 -->
        <div id="snippet1" class="collapse">
            <pre>
                <code class="language-csharp">
                    public class StateMachine : State
                    {
                        [SerializeField] protected State _currentState;
                    
                        public void GoToState<T>()
                        {
                            GoToState(typeof(T));
                        }
                    
                        public void GoToState(Type type)
                        {
                            if (_currentState != null)
                            {
                                _currentState.Deactivate();
                            }
                    
                            State newState = GetComponentInChildren(type) as State;
                            if (newState == null)
                            {
                                GameObject go = new GameObject(type.Name);
                                go.transform.SetParent(transform);
                                newState = go.AddComponent(type) as State;
                            }
                    
                            newState.Machine = this;
                            newState.Activate();
                            _currentState = newState;
                        }
                    
                        private void Update()
                        {
                            if (_currentState != null)
                            {
                                _currentState.ActiveUpdate();
                            }
                        }
                    }
                </code>
            </pre>
        </div>
        <!-- Code Snippet 2 -->
        <div id="snippet2" class="collapse">
            <pre>
                <code class="language-csharp">
                    public class State : MonoBehaviour
                    {
                        public StateMachine Machine { get; set; }
                    
                        public void Activate()
                        {
                            OnActivate();
                        }
                    
                        public void ActiveUpdate()
                        {
                            OnActiveUpdate();
                        }
                    
                        public void Deactivate()
                        {
                            OnDeactivate();
                        }
                    
                        protected virtual void OnActivate()
                        {
                    
                        }
                    
                        protected virtual void OnActiveUpdate()
                        {
                    
                        }
                    
                        protected virtual void OnDeactivate()
                        {
                    
                        }
                    }
                </code>
            </pre>
        </div>
    </div>
    <div class="text-left h4 text-left">
        <p>Critter Behavior</p>
    </div>
    <div class="text-left text-left">
        <p class="text-left text-muted lead">
            For critter behavior, I made the following scripts managing various states for their interactions in the game environment. 

            The foundational class supporting these scripts is the BaseEnemyState, 
            integrating components such as Field of View (FOV) and serving as the basis for specific state scripts:
            CritterAttackState, EnemyIdleState, EnemyRoamState, and EnemyChaseState.
        </p>
        <br>
        <p class="text-ce text-muted lead">
            The EnemyRoamState script manages the roaming behavior of AI enemies within the game environment. 
            This script is integral to controlling how enemies navigate and explore their surroundings, enhancing the game's realism and challenge.
            The script allows enemies to either patrol predefined points (_fixedRoamPoints) or dynamically explore new areas 
            based on environmental conditions.
            Critters adjust their roaming patterns based on game events and player proximity, 
            making their behavior more responsive and engaging.
            I added in Debugging options to be able to quickly check why something is not working and help troubleshooting.
        </p>
        <br>
           <!-- Button 2: Code Snippet 2 -->
           <div class="text-center mb-2"> <!-- Center-align the button text -->
            <button class="btn btn-primary custom-button" data-toggle="collapse" data-target="#snippet3" style="background-color: rgb(113, 113, 113); padding: 15px 30px; font-size: 18px;">EnemyRoamState Script</button>
        </div>
        <div id="snippet3" class="collapse">
            <pre style="border: none; background-color: #e9e9e9; color: rgb(255, 255, 255);"> <!-- Set the background color to gray and text color to white -->
                <code class="language-csharp">              
public class EnemyRoamState : BaseEnemyState
{
    [Header("Fixed Roam Settings")]
    [SerializeField] protected bool _useFixedRoamPoints = false;
    [SerializeField] protected Vector3[] _fixedRoamPoints;

    protected CapsuleCollider _capsuleCollider;
    protected Vector3 _walkPoint;
    protected bool _walkPointSet;

    private int _currentPatrolIndex = 0;
    private int _maxRecursionDepth = 20;

    protected override void OnActivate()
    {
        if (_capsuleCollider == null) _capsuleCollider = Machine.GetComponent<CapsuleCollider>();
    }

    protected override void OnActiveUpdate()
    {
        FindTargetsInView();
        HandleRoaming();

        ToggleHealthBar(false);
        if (Machine._anim != null) Machine._anim.SetFloat("WalkSpeed", Machine._agent.velocity.magnitude);

        if (Machine._targetsInView.Count > 0)
        {
            Machine.GoToState<EnemyChaseState>();
        }

        if (Machine._currentRoamTime >= Machine._maxTimeTillIdle && Machine._ableToGoBackToIdle)
        {
            Machine._currentRoamTime = 0;
            _walkPoint = Vector3.zero;
            _walkPointSet = false;
            Machine.GoToState<EnemyIdleState>();
        }
    }

    private void HandleRoaming()
    {
        Machine._currentRoamTime += Time.deltaTime;

        if (Vector3.Distance(transform.position, Machine._startPoint) > Machine._maxDistanceFromStartPoint)
        {
            TurnBackToStart();
            return;
        }

        if (!Machine._lastLocationSet)
        {
            Roaming();
        }
        else
        {
            Machine._agent.SetDestination(_walkPoint = Machine.LastTargetPosition);
            Vector3 distanceToWalkPoint = transform.position - _walkPoint;

            if (distanceToWalkPoint.magnitude < 1.25f)
            {
                _walkPointSet = false;
                Machine._lastLocationSet = false;
            }
        }
    }

    protected void Roaming()
    {
        Machine._agent.isStopped = false;

        if (_useFixedRoamPoints && _fixedRoamPoints.Length > 0)
        {
            Machine._agent.SetDestination(_fixedRoamPoints[_currentPatrolIndex]);

            if (Vector3.Distance(transform.position, _fixedRoamPoints[_currentPatrolIndex]) < 1f)
                _currentPatrolIndex = (_currentPatrolIndex + 1) % _fixedRoamPoints.Length;
        }
        else if (!_useFixedRoamPoints)
        {
            if (!_walkPointSet)
                SearchWalkPoint();

            if (_walkPointSet)
                Machine._agent.SetDestination(_walkPoint);

            Vector3 distanceToWalkPoint = transform.position - _walkPoint;

            if (distanceToWalkPoint.magnitude < 1.25f)
                _walkPointSet = false;
        }
    }

    protected void SearchWalkPoint(int recursionDepth = 0)
    {
        if (recursionDepth >= _maxRecursionDepth)
        {
            if (Machine._enableDebugLogs) Debug.LogWarning("Max recursion depth reached. Unable to find a walk point.");
            TurnAround();
            return;
        }

        Vector3 randomPoint = RandomPointInViewCone(transform.position, Machine._FOV._viewAngle, Machine._FOV._viewRadius);

        if (Vector3.Distance(randomPoint, Machine._startPoint) > Machine._maxDistanceFromStartPoint)
        {
            if (Machine._enableDebugLogs) Debug.Log($"Recursion Depth: {recursionDepth}, Distance from Start point too great");
            SearchWalkPoint(recursionDepth + 1);
            return;
        }

        RaycastHit hitInfo;
        if (Physics.Raycast(randomPoint + Vector3.up * 100f, Vector3.down, out hitInfo, Mathf.Infinity, Machine._groundLayerMask))
        {
            randomPoint.y = hitInfo.point.y + _capsuleCollider.height * 0.5f;
        }
        else
        {
            if (Machine._enableDebugLogs) Debug.Log($"Recursion Depth: {recursionDepth}, Failed to find ground for Y position");
            SearchWalkPoint(recursionDepth + 1);
            return;
        }

        NavMeshHit navMeshHit;
        if (!NavMesh.SamplePosition(randomPoint, out navMeshHit, 1.0f, NavMesh.AllAreas))
        {
            if (Machine._enableDebugLogs) Debug.Log($"Recursion Depth: {recursionDepth}, Point not on NavMesh");
            SearchWalkPoint(recursionDepth + 1);
            return;
        }

        if (Physics.Raycast(transform.position, randomPoint - transform.position, out hitInfo, Machine._attackRange, Machine._obstacleMask))
        {
            if (hitInfo.collider != null)
            {
                if (Machine._enableDebugLogs) Debug.Log($"Recursion Depth: {recursionDepth}, Obstacle detected in front");
                SearchWalkPoint(recursionDepth + 1);
                return;
            }
        }

        if (randomPoint.y > Machine.transform.position.y + 0.5f)
        {
            if (Machine._enableDebugLogs) Debug.Log($"Recursion Depth: {recursionDepth}, Point too high");
            SearchWalkPoint(recursionDepth + 1);
            return;
        }

        _walkPoint = randomPoint;
        _walkPointSet = true;
        if (Machine._enableDebugLogs) Debug.Log($"Walk point found: {_walkPoint}, Recursion Depth: {recursionDepth}");
    }

    protected Vector3 RandomPointInViewCone(Vector3 origin, float angle, float radius)
    {
        Quaternion currentRotation = transform.rotation;
        float randomAngle = Random.Range(-angle / 2f, angle / 2f);
        Quaternion randomRotation = currentRotation * Quaternion.Euler(0f, randomAngle, 0f);
        Vector3 randomDirection = randomRotation * Vector3.forward;
        Vector3 randomPoint = origin + randomDirection * radius;
        return randomPoint;
    }

    protected void TurnAround()
    {
        RaycastHit hitInfo;
        Vector3 oppositeDirection = -transform.forward;
        _walkPoint = transform.position + oppositeDirection * Machine._FOV._viewRadius;

        if (Physics.Raycast(transform.position, oppositeDirection, out hitInfo, Machine._FOV._viewRadius, Machine._obstacleMask))
        {
            if (hitInfo.collider != null)
            {
                _walkPointSet = true;
                if (Machine._enableDebugLogs) Debug.Log("Turned Around");
                return;
            }
        }
        _walkPointSet = true;
    }

    private void TurnBackToStart()
    {
        _walkPoint = Machine._startPoint;
        Machine._agent.SetDestination(_walkPoint);
        _walkPointSet = true;
        _walkPoint = Vector3.zero;

        _walkPointSet = false;
        SearchWalkPoint();
    }
}
                </code>
            </pre>
        </div>
    </div>
        <br>
        <br>
</body>
</html>

    <!-- Reflection -->
    <div class="container">
        <h2 class="text-left h1">Reflection</h2>
        <p class="text-left text-muted lead">
            This project was unlike any other I've worked on in several ways. Our approach was notably different; 
            instead of diving straight into development, we took quite some time and crafted a comprehensive Game Design Document spanning over 40 pages. 
            This method was a shift from my usual trial-and-error approach, but it proved invaluable in guiding our development process.
            <br>
            <br>
            Transitioning from a school environment to an office setting was a refreshing change of pace, 
            albeit it took some adjustment initially. Fortunately, I quickly adapted to my new surroundings and embraced the professional atmosphere.
            <br>
            <br>
            Reflecting on this project, I realize how much I've grown, both professionally and personally. 
            Beyond developing technical skills, I've learned the importance of empathy and collaboration. 
            This experience has really cemented the realization of the value of being a supportive team member, 
            which has had a positive impact on both my work and relationships with people in general.
            <br>
            <br>
            <img src="images/ChefLine-Main-Menu.jpeg" alt="Image Description" style="max-width: 100%; height: auto; width: 100%;" id="enlargeImage">
        </p>
    </div>

    

<!-- Prism.js Initialization -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-csharp.min.js"></script>

<!-- JavaScript to set initial video volume -->
<script>
    // Set the initial volume to 10% (0.1)
    document.getElementById("gameTrailer-chefline").volume = 0.05;
</script>

<!-- Bootstrap JS and jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>